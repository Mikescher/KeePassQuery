<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <ProjectGuid>{970C7528-7BAB-4234-BE7A-451E3A4BEAE3}</ProjectGuid>
  </PropertyGroup>
  

  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <OutputPath>..\..\Bin\Debug\</OutputPath>
    <DebugSymbols>True</DebugSymbols>
    <DebugType>Full</DebugType>
    <Optimize>False</Optimize>
    <CheckForOverflowUnderflow>True</CheckForOverflowUnderflow>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <BaseIntermediateOutputPath>obj\</BaseIntermediateOutputPath>
    <StartAction>Project</StartAction>
  </PropertyGroup>
  
  <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
    <OutputPath>..\..\Bin\Release\</OutputPath>
    <DebugSymbols>False</DebugSymbols>
    <DebugType>None</DebugType>
    <Optimize>True</Optimize>
    <CheckForOverflowUnderflow>False</CheckForOverflowUnderflow>
    <DefineConstants>TRACE</DefineConstants>
  </PropertyGroup>
  
  <PropertyGroup>
    <StartAction>Program</StartAction>
    <StartProgram>$(SolutionDir)..\Bin\$(Configuration)\KeePass.exe</StartProgram>
  </PropertyGroup>
  
  <ItemGroup>
    <ProjectReference Include="..\KeePassQuery\KeePassQuery.csproj">
      <Project>{26D7DDAC-7C2B-4537-A025-77A295A3A2D9}</Project>
      <Name>KeepassQuery</Name>
    </ProjectReference>
  </ItemGroup>
  
  
  
  <Target Name="Build">
    <Delete Files="$(OutputPath)\KeePass.exe" ContinueOnError="true" />
    <Delete Files="$(OutputPath)\KeePassQuery.plgx" ContinueOnError="true" />
    <Delete Files="$(OutputPath)\KeePassQuery.dll" ContinueOnError="true" />
    <MSBuild Projects="..\KeePassQuery\KeePassQuery.csproj" Properties="Configuration=$(Configuration);Platform=$(Platform)" Targets="Build" />
    <MSBuild Projects="..\KeePass\KeePass\KeePass.csproj" Properties="Configuration=$(Configuration);Platform=$(Platform)" Targets="Build" />
    <Copy SourceFiles="..\KeePass\Build\KeePass\$(Configuration)\KeePass.exe" DestinationFolder="$(OutputPath)" ContinueOnError="false" />
    <!-- <Copy SourceFiles="..\KeePassQuery\Bin\$(Configuration)\KeePassQuery.plgx" DestinationFolder="$(OutputPath)" ContinueOnError="false" /> -->
    <Copy SourceFiles="..\KeePassQuery\Bin\$(Configuration)\KeePassQuery.dll" DestinationFolder="$(OutputPath)" ContinueOnError="false" />
  </Target>
  
  <Target Name="Rebuild">
    <Delete Files="$(OutputPath)\KeePass.exe" ContinueOnError="true" />
    <Delete Files="$(OutputPath)\KeePassQuery.plgx" ContinueOnError="true" />
    <Delete Files="$(OutputPath)\KeePassQuery.dll" ContinueOnError="true" />
    <MSBuild Projects="..\KeePassQuery\KeePassQuery.csproj" Properties="Configuration=$(Configuration);Platform=$(Platform)" Targets="Rebuild" />
    <MSBuild Projects="..\KeePass\KeePass\KeePass.csproj" Properties="Configuration=$(Configuration);Platform=$(Platform)" Targets="Rebuild" />
    <Copy SourceFiles="..\KeePass\Build\KeePass\$(Configuration)\KeePass.exe" DestinationFolder="$(OutputPath)" ContinueOnError="false" />
    <!-- <Copy SourceFiles="..\KeePassQuery\Bin\$(Configuration)\KeePassQuery.plgx" DestinationFolder="$(OutputPath)" ContinueOnError="false" /> -->
    <Copy SourceFiles="..\KeePassQuery\Bin\$(Configuration)\KeePassQuery.dll" DestinationFolder="$(OutputPath)" ContinueOnError="false" />
  </Target>
  
  <Target Name="Run" DependsOnTargets="Build">
  </Target>
  
  
</Project>